!function(t,e){'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define([],e):'object'==typeof exports?exports._ctr_heatmap_tracking=e():t._ctr_heatmap_tracking=e()}(window,function(){return o={},r.m=n=[function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var o=n(4),r=n(5),i=n(6),a=n(7);t.exports=function(t){return o(t)||r(t)||i(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var o;o=function(){var d,r={defaultRadius:40,defaultRenderer:'canvas2d',defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:'x',defaultYField:'y',defaultValueField:'value',plugins:{}},i=(d=r.defaultRadius,t.prototype={_organiseData:function(t,e){var n=t[this._xField],o=t[this._yField],r=this._radi,i=this._data,a=this._max,s=this._min,c=t[this._valueField]||1,t=t.radius||this._cfgRadius||d;i[n]||(i[n]=[],r[n]=[]),i[n][o]?i[n][o]+=c:(i[n][o]=c,r[n][o]=t);i=i[n][o];return a<i?(e?this.setDataMax(i):this._max=i,!1):i<s?(e?this.setDataMin(i):this._min=i,!1):{x:n,y:o,value:c,radius:t,min:s,max:a}},_unOrganizeData:function(){var t,e=[],n=this._data,o=this._radi;for(t in n)for(var r in n[t])e.push({x:t,y:r,radius:o[t][r],value:n[t][r]});return{min:this._min,max:this._max,data:e}},_onExtremaChange:function(){this._coordinator.emit('extremachange',{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit('renderpartial',{min:this._min,max:this._max,data:[n]}))}return this},setData:function(t){var e=t.data,n=e.length;this._data=[],this._radi=[];for(var o=0;o<n;o++)this._organiseData(e[o],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit('renderall',this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit('renderall',this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit('renderall',this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t);function t(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)}var e=(n.prototype={renderPartial:function(t){0<t.data.length&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),0<t.data.length&&(this._drawAlpha(function(t){for(var e=[],n=t.min,o=t.max,r=t.radi,t=t.data,i=Object.keys(t),a=i.length;a--;)for(var s=i[a],c=Object.keys(t[s]),d=c.length;d--;){var l=c[d],u=t[s][l],h=r[s][l];e.push({x:s,y:l,value:u,radius:h})}return{min:n,max:o,data:e}}(t)),this._colorize())},_updateGradient:function(t){this._palette=a(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e,n,o,r=this._min=t.min,i=this._max=t.max,a=(t=t.data||[]).length,s=1-this._blur;a--;){var c,d=t[a],l=d.x,u=d.y,h=d.radius,p=Math.min(d.value,i),f=l-h,m=u-h,g=this.shadowCtx;this._templates[h]?c=this._templates[h]:this._templates[h]=(e=h,n=s,u=l=d=o=void 0,o=document.createElement('canvas'),d=o.getContext('2d'),u=l=e,o.width=o.height=2*e,1==n?(d.beginPath(),d.arc(l,u,e,0,2*Math.PI,!1),d.fillStyle='rgba(0,0,0,1)',d.fill()):((u=d.createRadialGradient(l,u,e*n,l,u,e)).addColorStop(0,'rgba(0,0,0,1)'),u.addColorStop(1,'rgba(0,0,0,0)'),d.fillStyle=u,d.fillRect(0,0,2*e,2*e)),c=o);p=(p-r)/(i-r);g.globalAlpha=p<.01?.01:p,g.drawImage(c,f,m),f<this._renderBoundaries[0]&&(this._renderBoundaries[0]=f),m<this._renderBoundaries[1]&&(this._renderBoundaries[1]=m),f+2*h>this._renderBoundaries[2]&&(this._renderBoundaries[2]=f+2*h),m+2*h>this._renderBoundaries[3]&&(this._renderBoundaries[3]=m+2*h)}},_colorize:function(){for(var t=this._renderBoundaries[0],e=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,o=this._renderBoundaries[3]-e,r=this._width,i=this._height,a=this._opacity,s=this._maxOpacity,c=this._minOpacity,d=this._useGradientOpacity,o=this.shadowCtx.getImageData(t=t<0?0:t,e=e<0?0:e,n=r<t+n?r-t:n,o=i<e+o?i-e:o),l=o.data,u=l.length,h=this._palette,p=3;p<u;p+=4){var f=l[p],m=4*f;m&&(f=0<a?a:f<s?f<c?c:f:s,l[p-3]=h[m],l[p-2]=h[1+m],l[p-1]=h[2+m],l[p]=d?h[3+m]:f)}o.data=l,this.ctx.putImageData(o,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],n=this._max,t=this._min;return Math.abs(n-t)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},n);function a(t){var e=t.gradient||t.defaultGradient,n=document.createElement('canvas'),t=n.getContext('2d');n.width=256,n.height=1;var o,r=t.createLinearGradient(0,0,256,1);for(o in e)r.addColorStop(o,e[o]);return t.fillStyle=r,t.fillRect(0,0,256,1),t.getImageData(0,0,256,1).data}function n(t){var e=t.container,n=this.shadowCanvas=document.createElement('canvas'),o=this.canvas=t.canvas||document.createElement('canvas'),r=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});o.className='heatmap-canvas',this._width=o.width=n.width=t.width||+r.width.replace(/px/,''),this._height=o.height=n.height=t.height||+r.height.replace(/px/,''),this.shadowCtx=n.getContext('2d'),this.ctx=o.getContext('2d'),o.style.cssText=n.style.cssText='position:absolute;left:0;top:0;',e.style.position='relative',e.appendChild(o),this._palette=a(t),this._templates={},this._setStyles(t)}var o,s,c=(o=!1,o='canvas2d'===r.defaultRenderer?e:o),l=function(){for(var t={},e=arguments.length,n=0;n<e;n++){var o,r=arguments[n];for(o in r)t[o]=r[o]}return t},u=(h.prototype={on:function(t,e,n){var o=this.cStore;o[t]||(o[t]=[]),o[t].push(function(t){return e.call(n,t)})},emit:function(t,e){var n=this.cStore;if(n[t])for(var o=n[t].length,r=0;r<o;r++)(0,n[t][r])(e)}},s=h,p.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=l(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit('renderall',this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit('renderall',this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},p);function h(){this.cStore={}}function p(){var e,t=this._config=l(r,arguments[0]||{});if(this._coordinator=new s,t.plugin){var n=t.plugin;if(!r.plugins[n])throw new Error('Plugin \''+n+'\' not found. Maybe it was not registered.');var o=r.plugins[n];this._renderer=new o.renderer(t),this._store=new o.store(t)}else this._renderer=new c(t),this._store=new i(t);n=(e=this)._renderer,o=e._coordinator,t=e._store,o.on('renderpartial',n.renderPartial,n),o.on('renderall',n.renderAll,n),o.on('extremachange',function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),t.setCoordinator(o)}return{create:function(t){return new u(t)},register:function(t,e){r.plugins[t]=e}}},t.exports?t.exports=o():void 0===(o='function'==typeof(o=o)?o.call(e,n,e,t):o)||(t.exports=o)},function(t,e,n){var o=n(2);t.exports=function(t){if(Array.isArray(t))return o(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var o=n(2);t.exports=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";n.r(e);var e=n(1),d=n.n(e),e=n(0),o=n.n(e);function r(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}var i="".concat("https://ctrwow-prod-heatmapapi-microservice.azurewebsites.net/api"),a='__ctr_hm_ssid',s='__ctr_heatmap_container',u='__ctr_clickmap_container',c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({maxClicks:10},window.__CTR_HM_SETTINGS||{}),l=Object.freeze({mobile:1,tablet:2,desktop:3}),h={Clicks:1,Move:2,Scroll:3},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=window.device,m={},g=[];window.device=m;var y=window.document.documentElement,_=window.navigator.userAgent.toLowerCase(),b=['googletv','viera','smarttv','internet.tv','netcast','nettv','appletv','boxee','kylo','roku','dlnadoc','pov_tv','hbbtv','ce-html'];function x(t,e){return-1!==t.indexOf(e)}function v(t){return x(_,t)}function w(t){return y.className.match(new RegExp(t,'i'))}function O(t){var e;w(t)||(e=y.className.replace(/^\s+|\s+$/g,''),y.className=e+' '+t)}function k(t){w(t)&&(y.className=y.className.replace(' '+t,''))}function C(){m.landscape()?(k('portrait'),O('landscape'),P('landscape')):(k('landscape'),O('portrait'),P('portrait')),D()}function P(t){for(var e=0;e<g.length;e++)g[e](t)}m.macos=function(){return v('mac')},m.ios=function(){return m.iphone()||m.ipod()||m.ipad()},m.iphone=function(){return!m.windows()&&v('iphone')},m.ipod=function(){return v('ipod')},m.ipad=function(){var t='MacIntel'===navigator.platform&&1<navigator.maxTouchPoints;return v('ipad')||t},m.android=function(){return!m.windows()&&v('android')},m.androidPhone=function(){return m.android()&&v('mobile')},m.androidTablet=function(){return m.android()&&!v('mobile')},m.blackberry=function(){return v('blackberry')||v('bb10')},m.blackberryPhone=function(){return m.blackberry()&&!v('tablet')},m.blackberryTablet=function(){return m.blackberry()&&v('tablet')},m.windows=function(){return v('windows')},m.windowsPhone=function(){return m.windows()&&v('phone')},m.windowsTablet=function(){return m.windows()&&v('touch')&&!m.windowsPhone()},m.fxos=function(){return(v('(mobile')||v('(tablet'))&&v(' rv:')},m.fxosPhone=function(){return m.fxos()&&v('mobile')},m.fxosTablet=function(){return m.fxos()&&v('tablet')},m.meego=function(){return v('meego')},m.cordova=function(){return window.cordova&&'file:'===location.protocol},m.nodeWebkit=function(){return'object'===p(window.process)},m.mobile=function(){return m.androidPhone()||m.iphone()||m.ipod()||m.windowsPhone()||m.blackberryPhone()||m.fxosPhone()||m.meego()},m.tablet=function(){return m.ipad()||m.androidTablet()||m.blackberryTablet()||m.windowsTablet()||m.fxosTablet()},m.desktop=function(){return!m.tablet()&&!m.mobile()},m.television=function(){for(var t=0;t<b.length;){if(v(b[t]))return!0;t++}return!1},m.portrait=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,'onorientationchange')?x(screen.orientation.type,'portrait'):m.ios()&&Object.prototype.hasOwnProperty.call(window,'orientation')?90!==Math.abs(window.orientation):1<window.innerHeight/window.innerWidth},m.landscape=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,'onorientationchange')?x(screen.orientation.type,'landscape'):m.ios()&&Object.prototype.hasOwnProperty.call(window,'orientation')?90===Math.abs(window.orientation):window.innerHeight/window.innerWidth<1},m.noConflict=function(){return window.device=f,this},m.ios()?m.ipad()?O('ios ipad tablet'):m.iphone()?O('ios iphone mobile'):m.ipod()&&O('ios ipod mobile'):m.macos()?O('macos desktop'):m.android()?m.androidTablet()?O('android tablet'):O('android mobile'):m.blackberry()?m.blackberryTablet()?O('blackberry tablet'):O('blackberry mobile'):m.windows()?m.windowsTablet()?O('windows tablet'):m.windowsPhone()?O('windows mobile'):O('windows desktop'):m.fxos()?m.fxosTablet()?O('fxos tablet'):O('fxos mobile'):m.meego()?O('meego mobile'):m.nodeWebkit()?O('node-webkit'):m.television()?O('television'):m.desktop()&&O('desktop'),m.cordova()&&O('cordova'),m.onChangeOrientation=function(t){'function'==typeof t&&g.push(t)};e='resize';function j(t){for(var e=0;e<t.length;e++)if(m[t[e]]())return t[e];return'unknown'}function D(){m.orientation=j(['portrait','landscape'])}Object.prototype.hasOwnProperty.call(window,'onorientationchange')&&(e='orientationchange'),window.addEventListener?window.addEventListener(e,C,!1):window.attachEvent?window.attachEvent(e,C):window[e]=C,C(),m.type=j(['mobile','tablet','desktop']),m.os=j(['ios','iphone','ipad','ipod','android','blackberry','macos','windows','fxos','meego','television']),D();var M=m;function I(t){var t=$(t),t=t.add(t.parents()),e=!1;return t.each(function(){if('fixed'===$(this).css('position'))return!(e=!0)}),e}function T(t){for(var e,n=[],o=t;o&&'html'!==(e=o.tagName.toLowerCase());o=o.parentNode)o.className&&(e+='.'+o.className.replace(/ /g,'.')),n.push(e);return n.reverse(),n.join(' ')}function E(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,'\\$&');e=new RegExp('[?&]'+t+'(=([^&#]*)|&|#|$)').exec(e);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g,' ')):'':null}function S(){return E('ctr_fid')}function N(){return E('ctr_fnid')}function B(){return M.desktop()?l.desktop:M.mobile()?l.mobile:M.tablet()?l.tablet:void 0}function H(){return window.sessionStorage}function R(){return H().getItem(a)}function A(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L(t){var e=t.funnelId,n=t.nodeId,t=t.actionType;return fetch("".concat(i,"/canTrack?funnelId=").concat(e,"&nodeId=").concat(n,"&actionType=").concat(t,"&deviceType=").concat(B(),"&v=2"),{method:'GET','content-type':'application/json'}).then(function(t){return t.json()})}function W(t){var e=window.__CTRWOW_CONFIG||{},n=e.siteId,o=e.pageId;return(0<arguments.length&&void 0!==t?t:[]).map(function(t){return F(F({},t),{},{siteId:n,pageId:o,url:window.location.origin+window.location.pathname})})}function z(t){t=0<arguments.length&&void 0!==t?t:[];navigator.sendBeacon("".concat(i,"/heatmap?v=2"),JSON.stringify(W(t)))}function G(t){t=0<arguments.length&&void 0!==t?t:[];fetch("".concat(i,"/heatmap?v=2"),{method:'POST','content-type':'application/json',body:JSON.stringify(W(t))}).then(function(t){return t.json()})}function Y(t){var e=0<arguments.length&&void 0!==t?t:h.Clicks,t=H().getItem(R())||0;return e===h.Clicks?t<c.maxClicks:(e===h.Move&&c.maxMove,1)}function V(){var n;R()||H().setItem(a,"ctr_hm_ssid_".concat((n=(new Date).getTime(),'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),('x'==t?e:3&e|8).toString(16)}))))}function q(){function i(t){var e=t.elementPath;Y()&&function(t){try{return document.querySelector(t)}catch(t){return}}(e)&&(t=[{x:(e=t).x,y:e.y,elementPath:e.elementPath,width:e.width,height:e.height,actionType:h.Clicks,deviceType:B(),funnelId:S(),nodeId:N(),totalClicks:1}],(navigator.sendBeacon?z:G)(t),e="".concat(R(),"_clicks"),t=H().getItem(e)||0,H().setItem(e,Number(t)+1))}$(document).on('click',function(t){var e=T(t.target),n=I($(t.target));i({x:t.offsetX,y:t.offsetY,elementPath:e,totalClicks:1,width:t.target.offsetWidth,height:t.target.offsetHeight,isFixed:n})}),$(document).on('touchstart',function(t){var e=t.target.getBoundingClientRect(),n=t.targetTouches[0].clientX-e.x,o=t.targetTouches[0].clientY-e.y,r=T(t.target),e=I($(t.target));i({x:Math.round(n),y:Math.round(o),elementPath:r,totalClicks:1,width:t.target.offsetWidth,height:t.target.offsetHeight,isFixed:e})})}function U(){function t(){window.__ctr_track_items&&window.__ctr_track_items.length&&function(t){(navigator.sendBeacon?z:G)(t);var e="".concat(R(),"_moves"),n=H().getItem(e)||0;H().setItem(e,Number(n)+t.length)}(window.__ctr_track_items)}window._ctrHeatMapTrackMove=setInterval(function(){t(),window.__ctr_track_items=[]},1e3),$(document).on('mouseover',function(t){var e=T(t.target),n=I($(t.target));n={x:t.offsetX,y:t.offsetY,elementPath:e,totalClicks:1,width:t.target.offsetWidth,height:t.target.offsetHeight,isFixed:n,actionType:h.Move,deviceType:B(),funnelId:S(),nodeId:N(),sessionId:R()},window.__ctr_track_items=window.__ctr_track_items||[],window.__ctr_track_items.push(n)})}function X(){var t,e;t=function(){var t,e,n;t=[{x:window.scrollX,y:window.scrollY,elementPath:'body',totalClicks:1,width:window.innerWidth,height:window.innerHeight,isFixed:!1,actionType:h.Scroll,deviceType:B(),funnelId:S(),nodeId:N(),sessionId:R()}],e="".concat(R(),"_scrolls"),n=H().getItem(e)||-1,(t=t.filter(function(t){return t.y>Number(n)})).length&&((navigator.sendBeacon?z:G)(t),t=Math.max.apply(Math,d()(t.map(function(t){return t.y})).concat([n])),H().setItem(e,"".concat(t)))},e=200,$(document).on('scroll',function(){window._ctrScrollTimeout&&clearTimeout(window._ctrScrollTimeout),window._ctrScrollTimeout=setTimeout(t,e)})}function J(){S()&&N()&&(V(),Y(h.Clicks)&&L({funnelId:S(),nodeId:N(),actionType:h.Clicks}).then(function(t){t&&q()}),Y(h.Move)&&L({funnelId:S(),nodeId:N(),actionType:h.Move}).then(function(t){t&&U()}),Y(h.Scroll)&&L({funnelId:S(),nodeId:N(),actionType:h.Scroll}).then(function(t){t&&X()}))}function K(){c.isExternal?function(t){try{var e=document.createElement('script');e.setAttribute('src','https://ctrwow-commonstorage.azureedge.net/public-assets/jquery-3.4.1.min.js'),e.setAttribute('async',''),document.head.appendChild(e),e.onload=function(){t&&t()}}catch(t){console.warn('injectDependencies error: '+t)}}(J):J()}var e=n(3),Q=n.n(e);function Z(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function tt(t,e){var n=1<arguments.length&&void 0!==e?e:{},e=((e=document.getElementById(s))?e.innerHTML='':(e=document.createElement('div')).id=s,e.style.width=document.body.scrollWidth+"px",e.style.height=document.body.scrollHeight+"px",document.body.append(e),e),n=Q.a.create(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({container:e,blur:.9,backgroundColor:'rgba(0, 0, 0, 0.4)'},n)),t=(t||[]).map(function(t){var e=t.totalClicks,n=t.elementPath,o=t.x,r=t.y,i=t.width,a=t.height,s=null;try{s=n?document.querySelector(n):null}catch(t){console.warn(t)}if(s){var t=$(s).offset(),n=I($(s)),i=s.offsetWidth/i,c=r*(s.offsetHeight/a);return{x:Math.round(t.left+o*i),y:Math.round(n?document.querySelector('.heatmap-canvas').offsetHeight-s.offsetHeight+c:t.top+c),value:e}}}).filter(function(t){return t});console.log({hmData:t}),n.setData({data:t});t=document.querySelector('.heatmap-canvas');t.style.opacity=.7,t.style['z-index']=999,e.style.position='absolute',e.style.top='0px',e.style.left='0px'}function et(t,e,n){e=function(t){return(0<arguments.length&&void 0!==t?t:[]).reduce(function(t,e){return t+e.totalClicks},0)}(e),e=parseFloat((t/e*100).toString()).toFixed(2),n='click'===n?'click':'tap';return"".concat(t," ").concat(n).concat(1<t?'s':''," (").concat(e,"%)")}function nt(){var t=document.getElementById(u);t&&(t.innerHTML='')}function ot(s,t){var c=1<arguments.length&&void 0!==t?t:'click';nt();var e,d=((t=document.getElementById(u))?t.innerHTML='':(t=document.createElement('div')).id=u,t.style.width=document.body.scrollWidth+"px",t.style.height=document.body.scrollHeight+"px",document.body.append(t),t),l=(e={},s.forEach(function(t){e["".concat(t.elementPath)]||(e["".concat(t.elementPath)]=0),e["".concat(t.elementPath)]=e["".concat(t.elementPath)]+t.totalClicks}),e);console.log({clicksMapData:l});t=Object.keys(l).sort(function(t,e){return t.split(' ').length-e.split(' ').length});console.log({sortedKeys:t}),t.forEach(function(t){var e,n,o,r,i,a=document.querySelector(t);a&&(e=l[t],n=a.offsetLeft,o=a.offsetTop,r=a.offsetWidth,i=a.offsetHeight,t=et(e,s,c),e=(a={left:n,top:o,width:r,height:i,displayText:t}).left,n=a.top,o=a.width,r=a.height,i=a.displayText,t=document.createElement('div'),a=document.createElement('span'),t.className='click-map-container',t.style.position='absolute',t.style.width="".concat(o,"px"),t.style.height="".concat(r,"px"),t.style.top=n+'px',t.style.left=e+'px',t.style.zIndex='1000',t.style.background='rgba(0, 158, 253, 0.25)',t.style.border='1px dashed rgb(0, 162, 242)',t.style.opacity='0',a.innerHTML="".concat(i),a.className='click-map-total-clicks',a.style.position='absolute',a.style.top=0===n?'auto':'-36px',a.style.bottom=0===n?'-36px':'auto',a.style.left='-1px',a.style.background='rgb(0, 162, 242)',a.style.border='1px dashed rgb(0, 162, 242)',a.style.color='rgb(255, 255, 255)',a.style.padding='4px 8px',a.style['border-radius']='4px',a.style['font-weight']='600',a.style['font-size']='14px',a.style['letter-spacing']='0.1px',a.style['line-height']='20px',t.appendChild(a),d.appendChild(t))})}var rt='_ctr_hm_scrollmap_canvas',it=5;function at(t,e){return t[st(t,e)]}function st(t,e){var n=t[0].pixels_scrolled;return t.findIndex(function(t){return e>=t.pixels_scrolled-n&&e<t.pixels_scrolled})}function ct(t,e){var n=t.width,o=t.height,r=t.getContext('2d');r.globalAlpha=.8,console.log({canvasHeight:o});for(var i=0;i<o;i++)try{var a=at(e,i).percent_of_total/100;r.beginPath(),r.moveTo(0,i),r.lineTo(n,i),r.lineWidth=1,r.strokeStyle=function(t,e){return'hsla('+240*(1-(1<t?1:t))+', 100%, 50%, '+(1<arguments.length&&void 0!==e?e:.8)+')'}(a),r.stroke()}catch(t){console.log({iError:i})}}function dt(t,e){var o,n,r,i,a=0<arguments.length&&void 0!==t?t:[],s=1<arguments.length?e:void 0,c=function(t,e){var t=0<arguments.length&&void 0!==t?t:[],n=1<arguments.length&&void 0!==e?e:'',o={};return t.forEach(function(t){var e=t[n];o[e]=[Math.max.apply(Math,d()(o[e]||[]).concat([t.y]))]}),o}(a,'sessionId'),t=Object.keys(c).length,s=(o=function(t){var e=[];console.log({pHeight:t});for(var n=it;n<=100;n+=it){var o={percentage_scrolled:n,pixels_scrolled:Math.round(t*(n/100)),percent_of_total:0,count:0};e.push(o)}return e}(s),n=c,r=t,e=d()(o),i=[],Object.keys(n).forEach(function(t){t=n[t][0];i.push(t)}),i.forEach(function(t){var e=st(o,t);if(-1<e)for(var n=0;n<=e;n++)o[n].count+=1,o[n].percent_of_total=o[n].count/r*100,o[n].percent_of_total=Math.round(o[n].percent_of_total)}),e);console.log({smReportData:s});e=a.reduce(function(t,e){return t+e.height},0);return{smReportData:s,averageFoldY:Math.round(e/a.length),totalSessions:t,sessionData:c}}function lt(i){[25,50,75].forEach(function(e){var t,n,o,r=i.find(function(t){return Math.round(t.percent_of_total)===e});r&&(t=e,n=r.pixels_scrolled-i[0].pixels_scrolled,o=document.createElement('div'),(r=document.createElement('span')).innerHTML="".concat(t,"%"),r.style.background='rgb(10, 10, 10)',r.style['border-radius']='0px 4px 0px 0px',r.style.color='rgb(255, 255, 255)',r.style.display='inline-block',r.style.padding='4px 8px',o.style['box-shadow']='rgb(50 50 50 / 25%) 0px 3px 5px 0px',o.style['font-size']='11px',o.style['font-weight']='bold',o.style.position='absolute',o.style['text-transform']='uppercase',o.style.width='100%',o.style.height="".concat(20,"px"),o.style.top="".concat(n-20,"px"),o.style['z-index']="1000",o.appendChild(r),document.body.appendChild(o))})}function ut(t){var r=dt(t,document.body.scrollHeight);function e(t){var e,n=at(r.smReportData,t.pageY),o=n?n.percent_of_total:0;e=100<o?100:o,n=t.pageY,o=document.getElementById('ReachedPercentageTooltip'),t=document.querySelector('#ReachedPercentageTooltip span'),document.getElementById('ReachedPercentageTooltip')||((o=document.createElement('div')).id='ReachedPercentageTooltip',o.style.width='100%',o.style['text-align']='center',o.style.position='absolute',o.style.opacity='0.7',o.style.transition='opacity 240ms ease-in-out 0s',o.style['z-index']='1000',o.style['border-bottom']='1px dashed black',(t=document.createElement('span')).style.color="rgb(255, 255, 255)",t.style.background="rgb(10, 10, 10)",t.style['border-radius']='4px',t.style.padding='4px 8px',o.appendChild(t),document.body.appendChild(o)),t.innerHTML="".concat(e,"% of users reached this point"),o.style.top="".concat(n,"px")}console.log({scrollMapData:r}),(t=document.createElement('canvas')).id=rt,t.width=document.body.scrollWidth,t.height=document.body.scrollHeight,t.style.opacity='0.7',t.style['z-index']=999,t.style.position='absolute',t.style.top='0px',t.style.left='0px',document.body.append(t),function(t){var e=0<arguments.length&&void 0!==t?t:0,n=document.createElement('div'),t=document.createElement('span');t.innerHTML='Average fold',t.style.background='rgb(255, 255, 255)',t.style['border-radius']='0px 4px 0px 0px',t.style.color='rgb(10, 10, 10)',t.style.display='inline-block',t.style.padding='4px 8px',n.style['box-shadow']='rgb(50 50 50 / 25%) 0px 3px 5px 0px',n.style['font-size']='11px',n.style['font-weight']='bold',n.style.position='absolute',n.style['text-transform']='uppercase',n.style.width='100%',n.style['grid-row-start']='1',n.style['grid-column-start']='1',n.style.top="".concat(e,"px"),n.style['z-index']="1000",n.style['border-bottom']="3px white solid",n.appendChild(t),document.body.appendChild(n)}(r.averageFoldY),t=r.smReportData,ct(document.getElementById(rt),t),lt(r.smReportData),document.getElementById(rt).removeEventListener('mousemove',e),document.getElementById(rt).addEventListener('mousemove',e)}function ht(){window.parent.postMessage({eventName:'ctr_heatmap_pageloaded',pageWidth:document.body.offsetWidth,pageHeight:document.body.offsetHeight},'*'),window.addEventListener('message',function(t){var e=t[t.message?'message':'data'];(t=document.getElementById(rt))&&(t.innerHTML=''),nt(),e.eventName&&'ctr_heatmap_render'===e.eventName?(tt(e.data,{radius:15}),ot(e.data)):e.eventName&&'ctr_heatmap_render_move_map'===e.eventName?tt(e.data,{radius:90}):e.eventName&&'ctr_heatmap_render_click_map'===e.eventName?(tt(e.data,{radius:15}),ot(e.data,'click')):e.eventName&&'ctr_heatmap_render_tap_map'===e.eventName?(tt(e.data,{radius:15}),ot(e.data,'tap')):e.eventName&&'ctr_heatmap_render_scroll_map'===e.eventName&&ut(e.data),window.parent.postMessage({eventName:'ctr_heatmap_rendered',pageWidth:document.body.offsetWidth,pageHeight:document.body.offsetHeight},'*')},!1)}window.addEventListener('load',function(){('1'===E('ctr_heatmap_preview')?ht:K)()})}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&'object'==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,'default',{enumerable:!0,value:e}),2&t&&'string'!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,'a',e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=8);function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o});